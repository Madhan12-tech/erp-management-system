<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Accounts & Purchase</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .tab-content { padding-top: 20px; }
    .form-section { background: #f4f4f4; padding: 20px; border-radius: 10px; }
    table th, table td { vertical-align: middle !important; }
    .nav-tabs .nav-link.active { background-color: #0d6efd; color: white; }
  </style>
</head>
<body class="container py-4">

  <h2 class="mb-4 text-center">Accounts & Purchase Management</h2>

  <!-- Nav Tabs -->
  <ul class="nav nav-tabs" id="entryTabs" role="tablist">
    <li class="nav-item">
      <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#accounts-tab" type="button">Accounts Entry</button>
    </li>
    <li class="nav-item">
      <button class="nav-link" data-bs-toggle="tab" data-bs-target="#purchase-tab" type="button">Purchase Entry</button>
    </li>
  </ul>

  <div class="tab-content">
    <!-- Accounts Tab -->
    <div class="tab-pane fade show active" id="accounts-tab" role="tabpanel">
      <form method="POST" class="form-section mt-3">
        <input type="hidden" name="form_type" value="accounts">
        <div class="row g-3">
          <div class="col-md-3">
            <label class="form-label">Transaction Type</label>
            <select class="form-select" name="type" required>
              <option value="Income">Income</option>
              <option value="Expense">Expense</option>
              <option value="Salary">Salary</option>
              <option value="Tax">Tax</option>
            </select>
          </div>
          <div class="col-md-3">
            <label class="form-label">Amount (₹)</label>
            <input type="number" class="form-control" name="amount" required>
          </div>
          <div class="col-md-3">
            <label class="form-label">Date</label>
            <input type="date" class="form-control" name="date" required>
          </div>
          <div class="col-md-3">
            <label class="form-label">Description</label>
            <input type="text" class="form-control" name="description">
          </div>
        </div>
        <div class="mt-3 text-end">
          <button type="submit" class="btn btn-primary">Add Account Entry</button>
        </div>
      </form>
    </div>

    <!-- Purchase Tab -->
    <div class="tab-pane fade" id="purchase-tab" role="tabpanel">
      <form method="POST" class="form-section mt-3">
        <input type="hidden" name="form_type" value="purchase">
        <div class="row g-3">
          <div class="col-md-3">
            <label class="form-label">Item Name</label>
            <input type="text" class="form-control" name="item_name" required>
          </div>
          <div class="col-md-3">
            <label class="form-label">Vendor</label>
            <input type="text" class="form-control" name="vendor" required>
          </div>
          <div class="col-md-2">
            <label class="form-label">Qty</label>
            <input type="number" class="form-control" name="quantity" required>
          </div>
          <div class="col-md-2">
            <label class="form-label">Rate (₹)</label>
            <input type="number" class="form-control" name="rate" required>
          </div>
          <div class="col-md-2">
            <label class="form-label">Date</label>
            <input type="date" class="form-control" name="date" required>
          </div>
        </div>
        <div class="mt-3 text-end">
          <button type="submit" class="btn btn-success">Add Purchase Entry</button>
        </div>
      </form>
    </div>
  </div>

  <hr class="my-4">

  <!-- Live Table -->
  <h4 class="text-center mb-3">Recent Entries</h4>

  <div class="d-flex justify-content-end mb-3">
    <a href="/export_accounts_excel" class="btn btn-outline-primary me-2">Export Accounts Excel</a>
    <a href="/export_accounts_pdf" class="btn btn-outline-danger">Export Accounts PDF</a>
  </div>

  <div class="table-responsive">
    <table class="table table-bordered bg-white">
      <thead class="table-dark">
        <tr>
          <th colspan="5" class="text-center">Accounts</th>
        </tr>
        <tr>
          <th>ID</th>
          <th>Type</th>
          <th>Amount</th>
          <th>Date</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        {% for row in accounts %}
        <tr>
          <td>ACC{{ 1000 + row[0] }}</td>
          <td>{{ row[1] }}</td>
          <td>₹{{ row[2] }}</td>
          <td>{{ row[3] }}</td>
          <td>{{ row[4] }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    <table class="table table-bordered mt-5 bg-white">
      <thead class="table-secondary">
        <tr>
          <th colspan="6" class="text-center">Purchases</th>
        </tr>
        <tr>
          <th>ID</th>
          <th>Item</th>
          <th>Vendor</th>
          <th>Qty</th>
          <th>Rate (₹)</th>
          <th>Date</th>
        </tr>
      </thead>
      <tbody>
        {% for row in purchases %}
        <tr>
          <td>PUR{{ 1000 + row[0] }}</td>
          <td>{{ row[1] }}</td>
          <td>{{ row[2] }}</td>
          <td>{{ row[3] }}</td>
          <td>₹{{ row[4] }}</td>
          <td>{{ row[5] }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
