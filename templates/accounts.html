<!-- templates/accounts.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accounts Management</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .card {
            border-radius: 15px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .popup-form {
            display: none;
            position: fixed;
            top: 10%;
            left: 50%;
            transform: translateX(-50%);
            background: white;
            padding: 20px;
            border: 1px solid #ccc;
            z-index: 1000;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            border-radius: 12px;
        }
        .overlay {
            display: none;
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 999;
        }
    </style>
</head>
<body>
    <div class="container mt-4">
        <h2 class="text-center mb-4">Accounts Dashboard</h2>

        <div class="row text-center mb-4">
            <div class="col-md-3">
                <div class="card p-3 bg-light">
                    <h5>Total Income</h5>
                    <h4>₹1,20,000</h4>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card p-3 bg-light">
                    <h5>Total Expenses</h5>
                    <h4>₹1,05,000</h4>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card p-3 bg-light">
                    <h5>Outstanding</h5>
                    <h4>₹15,000</h4>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card p-3 bg-light">
                    <h5>Profit/Loss</h5>
                    <h4 class="text-success">₹5,000</h4>
                </div>
            </div>
        </div>

        <button class="btn btn-success mb-3" onclick="showForm()">+ Add Entry</button>

        <div class="overlay" id="overlay"></div>
        <div class="popup-form" id="popupForm">
            <form method="POST" action="/add-account-entry">
                <h5>Add Financial Entry</h5>
                <input type="text" name="entry_id" class="form-control mb-2" placeholder="Auto ID" readonly value="ACC{{ data|length + 1001 }}">
                <input type="text" name="description" class="form-control mb-2" placeholder="Description" required>
                <input type="number" name="amount" class="form-control mb-2" placeholder="Amount ₹" required>
                <select name="type" class="form-control mb-2">
                    <option value="Income">Income</option>
                    <option value="Expense">Expense</option>
                </select>
                <input type="text" name="category" class="form-control mb-2" placeholder="Category (e.g. Salary, Rent)" required>
                <input type="date" name="date" class="form-control mb-2" required>
                <button type="submit" class="btn btn-primary">Submit</button>
                <button type="button" class="btn btn-secondary" onclick="closeForm()">Cancel</button>
            </form>
        </div>

        <table class="table table-bordered table-striped">
            <thead class="table-dark">
                <tr>
                    <th>ID</th>
                    <th>Description</th>
                    <th>Amount</th>
                    <th>Type</th>
                    <th>Category</th>
                    <th>Date</th>
                </tr>
            </thead>
            <tbody>
                {% for row in data %}
                <tr>
                    <td>ACC{{ row[0] + 1000 }}</td>
                    <td>{{ row[1] }}</td>
                    <td>₹{{ row[2] }}</td>
                    <td>{{ row[3] }}</td>
                    <td>{{ row[4] }}</td>
                    <td>{{ row[5] }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <script>
        function showForm() {
            document.getElementById('popupForm').style.display = 'block';
            document.getElementById('overlay').style.display = 'block';
        }
        function closeForm() {
            document.getElementById('popupForm').style.display = 'none';
            document.getElementById('overlay').style.display = 'none';
        }
    </script>
</body>
</html>
